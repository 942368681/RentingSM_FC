<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="../../css/iuapmobile.um.css">
		<link rel="stylesheet" href="../../css/fonts/iconfont.css">
		<link rel="stylesheet" href="css/fraCommon.css">
		<script src="../../js/font.js" ></script>
		<script src="../../js/summer.js" ></script>
		<script src="../../js/jquery.min.js" ></script>
		<script src="../../js/Frameworks/iuapmobile.frameworks.ui.js" ></script>
	</head>
	<body>
		<div class="um-frame" id="fra_hasReject">
			<div class="um-header-light">
				<div class="sera">
						<div class="s-box" onclick="opensearch()">
							<i class="iconfont icon-search"> </i>
							<p class="txt">
								输入客户名称/关键词
							</p>
						</div>
				</div>
			</div>
			<div class="um-content">
				  <div class="list customList um-bgc-white" v-for="(item,index) in dataList">
			       <p class="pl10 title pr10">{{item.name}}<span class="status fr"><i class="iconfont icon-customer mr5"></i>{{item.manager}}</span></p>
			       <div class="center"   @click="openDetail(item.programId)">
			       		<p class="type pl10"><span>{{item.personType}} </span> | <span>{{item.taskType}}</span> </p>
			       		<p class="type card pl10 status">{{item.programNum}}   <span class="fr">{{item.status}}</span></p>
			      		<p class="time pl10 pr10"><span>创建时间：<span>{{item.creatTime}}</span></span></p>
			       </div>
			        <p class=" select um-box"  >
				       <span class="um-bf1   tc" @click="upload(item.programId)"><i class="iconfont icon-Upload mr5"></i>上传资料</span>
				       <span class="um-bf1   tc"  @click="edit(item.programId)"><i class="iconfont icon-modify mr5"></i>修改</span>
				       <span class="um-bf1  tc"  @click="openOpacity(item.programId)"><i class="iconfont icon-nav_delete mr5"></i>删除</span>
			       </p>
			    </div>
			    
			</div>
		</div>
			<script src="../../js/vue.js" ></script>
		<script>
			 function opensearch(){
		    	summer.openWin({
					id:'search',
					url:'html/fastReport/search.html',
					pageParam:{
						source:"program"
					}
					
				});
		    }
		     var _pageNum=1;
			summerready=function(){
				getData();
				summer.setRefreshHeaderInfo({
				    visible: true,
				    loadingImg: 'img/refresh.png',
				    bgColor: '#ffffff',
				    textColor: '#aaaaaa',
				    textDown: '下拉刷新...',
				    textUp: '松开刷新...',
				    showTime: true
				}, function(ret, err) {
				    //通常在这里从服务器加载数据，t
				   getData(1,true);
               	   _pageNum=1;
				    summer.refreshHeaderLoadDone()//加载完成后调用方法恢复组件到默认状态
				});
				summer.setRefreshFooterInfo({
				    visible: true,
				    loadingImg: 'img/refresh.png',
				     bgColor: '#ffffff',
				    textColor: '#aaaaaa',
				    textDown: '上拉刷新...',
				    textUp: '松开刷新...',
				    showTime: true
				}, function(ret, err) {
				    //通常在这里从服务器加载数据，
				    _pageNum++;
        	 		getData(_pageNum,false);
				    summer.toast({msg:"没有更多了"});
				    summer.refreshFooterLoadDone();//加载完成后调用方法恢复组件到默认状态
				});
			}
			function getData(num,flag){
				fra_hasReject.dataList=[{
					name:"徐毅",
					personType:"自然人",
					taskType:"形式售后回租",
					programNum:"312329197605205638",
					status:"已驳回",
					manager:"张飞",
					programId:"100",
					creatTime:"2016-09-21"
				},{
					name:"徐毅",
					personType:"自然人",
					taskType:"形式售后回租",
					programNum:"312329197605205638",
					status:"已驳回",
					manager:"张飞",
					programId:"101",
					creatTime:"2016-09-21"
				},{
					name:"徐毅",
					personType:"自然人",
					taskType:"形式售后回租",
					programNum:"312329197605205638",
					status:"已驳回",
					manager:"张飞",
					programId:"102",
					creatTime:"2016-09-21"
				},{
					name:"徐毅",
					personType:"自然人",
					taskType:"形式售后回租",
					programNum:"312329197605205638",
					status:"已驳回",
					manager:"张飞",
					programId:"103",
					creatTime:"2016-09-21"
				}];
				//ajax请求
				/*ajaxRequest({
			        type: 'post',
			        url: '/userlink/getMyCorpUser',
			        param: {param:param}
			    }, function (res) {
			    	 summer.hideProgress();
			          if (!flag) {
			          	if(_pageNum==1){
			                if(isEmpty(res.data.content)){
			                	createNull('addressList');
			                	return;
			                }
			             };
			                renderList(res.data.content)
			                if(_pageNum>1){
			                    summer.refreshFooterLoadDone();
			                }
			                if(_pageNum>res.data.totalPages){
			                	summer.toast({
			                		msg:"没有更多了"
			                	});
			                }
			
			            } else {
			                _pageNum=1;
			                if(isEmpty(res.data.content)){
			                	createNull('addressList');
			                	return;
			                }
			                renderFresh(res.data.content);
			                summer.refreshHeaderLoadDone();
			            }
				    }, function (err) {
				    	 console.log(err);
					   	 summer.hideProgress();
					});*/
			}
			 var fra_hasReject= new Vue({
						          el:'#fra_hasReject',
						          data(){
						            return {
										    dataList:''
						                   }
						              },
									mounted(){
									},
									methods:{
										 openOpacity(id){
										 	console.log(id);
										 	summer.openFrame({
								                id: 'Opacity',
								                url: 'html/fastReport/Opacity.html',
								                position: {
								                    top: 0,
								                    left: 0,
								                    bottom: 0,
								                    right: 0
								                },
							                	opaque: false,
							                	pageParam:{
							                		id:id
							                	}
							                 })
										 },
										 openDetail(id){
										 	console.log(id);
										 	summer.openWin({
												id:'programDetail',
												url:'html/fastReport/programDetail.html',
												create:false,
												type:'actionBar',
												actionBar: {
													title: "项目查看",
													titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
													backgroundColor: "#039be5",
													leftItem:{
															image: "img/back.png",
															method:"",//返回按钮自定义事件
															text:"返回",
															textColor:"#ffffff"  //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
													} 
												},
												pageParam:{
							                		id:id
							                	}
											});
										 },
										 upload(id){
											summer.openWin({
												id:'uploadImg',
												url:'html/fastReport/uploadImg.html',
												create:false,
												type:'actionBar',
												actionBar: {
													title: "资料上传",
													titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
													backgroundColor: "#039be5",
													leftItem:{
															image: "img/back.png",
															method:"",//返回按钮自定义事件
															text:"返回",
															textColor:"#ffffff"  //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
													},
													rightItems:[{
														type:"text",
														text:"保存",
														textColor:"#ffffff" ,
														method:"save()"
													}] 
												},
												pageParam:{
							                		id:id,
							                		source:"programSelect"
							                	}
											});
										},
										submit(id){
											summer.openWin({
												id:'submitSure',
												url:'html/fastReport/submitSure.html',
												create:false,
												type:'actionBar',
												actionBar: {
													title: "提交确认",
													titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
													backgroundColor: "#039be5",
													leftItem:{
															image: "img/back.png",
															method:"",//返回按钮自定义事件
															text:"返回",
															textColor:"#ffffff"  //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
													} 
												},
												pageParam:{
							                		id:id,
							                		source:"programSelect"
							                	}
											});
										},
										edit(id){
											summer.openWin({
												id:'setProject',
												url:'html/fastReport/setProject.html',
												create:false,
												type:'actionBar',
												actionBar: {
													title: "快捷报单",
													titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
													backgroundColor: "#039be5",
													leftItem:{
															image: "img/back.png",
															method:"",//返回按钮自定义事件
															text:"返回",
															textColor:"#ffffff"  //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
													},
													rightItems : [{
														type : "text",
														text : "下一步",
														textColor : "#ffffff", //文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
														method : "nextStopInput()" //在打开的window中自定义事件
													}]
												},
												pageParam:{
							                		id:id,
							                		source:"programSelect"
							                	}
											});
										},
									},
									
						        })
		</script>
	</body>
</html>